# 39장. DOM

## 39.3 노드 탐색

요소 노드를 기준으로 DOM 트리 안에서 부모, 형제, 자식 노드 등을 탐색할 수 있다. 이를 위해 Node와 Element 인터페이스는 여러 트리 탐색용 프로퍼티를 제공한다. 이 프로퍼티들은 모두 getter만 존재하는 읽기 전용 접근자 프로퍼티다. 값을 할당하면 무시된다.

### 39.3.1 공백 텍스트 노드

HTML 요소 사이에 존재하는 스페이스, 탭, 줄바꿈(개행) 같은 공백 문자들도 텍스트 노드를 생성한다. 이렇게 생긴 텍스트 노드를 공백 텍스트 노드라고 부른다.

### 39.3.2 자식 노드 탐색

자식 노드를 탐색할 때는 다음과 같은 노드 탐색 프로퍼티를 사용한다.

| 프로퍼티                            | 설명                                                                                                                                                                      |
| ----------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Node.prototype.childNodes           | 자식 노드를 모두 탐색하여 DOM 컬렉션 객체인 NodeList에 담아 반환한다. childNodes 프로퍼티가 반환한 NodeList에는 요소 노드뿐만 아니라 텍스트 노드도 포함되어 있을 수 있다. |
| Element.prototype.children          | 자식 노드 중에서 요소 노드만 모두 탐색하여 DOM 컬렉션 객체인 HTMLCollection에 담아 반환한다. children 프로퍼티가 반환한 HTMLCollection에는 텍스트 노드가 포함되지 않는다. |
| Node.prototype.firstChild           | 첫 번째 자식 노드를 반환한다. firstChild 프로퍼티가 반환한 노드는 텍스트 노드이거나 요소 노드다.                                                                          |
| Node.prototype.lastChild            | 마지막 자식 노드를 반환한다. lastChild 프로퍼티가 반환한 노드는 텍스트 노드이거나 요소 노드다.                                                                            |
| Element.prototype.firstElementChild | 첫 번째 자식 요소 노드를 반환한다. firstElementChild 프로퍼티는 요소 노드만 반환한다.                                                                                     |
| Element.prototype.lastElementChild  | 마지막 자식 요소 노드를 반환한다. lastElementChild 프로퍼티는 요소 노드만 반환한다.                                                                                      |

## 39.3.3 자식 노드 존재 확인

자식 노드가 있는지 확인할 때는 `hasChildNodes()` 메서드를 사용한다. 이 메서드는 텍스트 노드까지 포함해서 자식이 있는지를 확인한다.

만약 요소 노드만 확인하고 싶다면 `children.length`나 `childElementCount` 프로퍼티를 사용하면 된다.

### 39.3.4 요소 노드의 텍스트 노드 탐색

요소 노드의 텍스트 노드도 자식 노드에 포함된다. 텍스트 노드는 `firstChild` 프로퍼티를 이용해 접근할 수 있다.

### 39.3.5 부모 노드 탐색

부모 노드를 찾을 때는 `parentNode` 프로퍼티를 사용한다. 현재 노드의 부모를 반환한다.

### 39.3.6 형제 노드 탐색

형제 노드를 탐색할 때는 다음 프로퍼티들을 사용할 수 있다.

- `previousSibling`, `nextSibling`: 이전/다음 형제 노드 반환 (텍스트 노드 포함)
- `previousElementSibling`, `nextElementSibling`: 이전/다음 요소 노드만 반환

## 39.4 노드 정보 취득

노드 자체에 대한 정보를 알고 싶을 때는 다음 프로퍼티를 활용할 수 있다.

- `nodeType`: 노드 타입 번호 (ex. 요소 노드는 1, 텍스트 노드는 3)
- `nodeName`: 노드 이름 (ex. 요소는 대문자 태그명, 텍스트 노드는 #text)
- `nodeValue`: 텍스트 노드라면 해당 텍스트, 아니면 null

## 39.5 요소 노드의 텍스트 조작

요소의 텍스트를 읽거나 수정할 때 사용할 수 있는 프로퍼티가 있다.

### 39.5.1 nodeValue

`nodeValue`는 getter와 setter를 모두 갖춘 접근자 프로퍼티다. 텍스트 노드에 대해서만 의미가 있으며, 텍스트 노드의 내용을 읽거나 수정할 수 있다.

요소 노드의 `nodeValue`를 참조하면 null이 반환되므로 주의해야 한다.

### 39.5.2 textContent

`textContent`도 getter와 setter를 모두 갖춘 접근자 프로퍼티다. 요소 노드의 콘텐츠 영역 전체(자식 요소 포함)를 텍스트 형태로 읽거나 수정할 수 있다.

- 참조하면 요소 내부 모든 텍스트를 반환한다.
- 값을 할당하면 요소 내부 모든 텍스트를 한 번에 변경할 수 있다.

`nodeValue`보다 `textContent`를 사용하는 쪽이 코드가 단순하고 실용적이다.

