## 12.7 다양한 함수의 형태
### 12.7.1 즉 실행 함수
- 함수 정의와 동시에 즉시 호출되는 함수를 즉시 실행 함수라고 한다.
- 즉시 실행 함수는 단 한 번만 호출되며 다시 호출할 수 없다.

```
// 익명 즉시 실행 함수
(function () {
    var a = 3;
    var b = 5;
    return a * b;
}());
```

- 즉시 실행 함수는 함수 이름이 없는 익명 함수를 사용하는 것이 일반적이다.
- 함수 이름이 있는 기명 즉시 실행 함수도 사용할 수 있다.
- 그룹 연산자 ( `...` ) 내의 기명 함수는 함수 선언문이 아니라 함수 리터럴로 평가되며 함수 이름은 함수 몸체에서만 참조할 수 있는 식별자 <br>
=> 다시 호출 불가능

```
// 기명 즉시 실행 함수
(function foo() {
    var a = 3;
    var b = 5;
    return a * b;
}());

foo(); // ReferenceError: foo is not defined
```

- 즉시 실행 함수는 반드시 그룹 연산자 ( `...` ) 로 감싸야 한다.
- 에러 나는 경우
  ```
  function () {
    // ...
  }();
  ```
  - 함수 선언문은 함수 이름을 생략할 수 없다. <br>

  ```
  function foo() {
    // ...
  }(); 
  ```
  - 자바스크립트 엔진이 암묵적으로 수행하는 세미클론 자동 삽입 기능에 의해 함수 선언문이 끝나는 위치, 즉 함수 코드 블록의 닫는 중괄호 뒤에 `;` 이 암묵적으로 추가되기 때문이다.

### 12.7.2 재귀 함수
- 함수가 자기 자신을 호출하는 것을 재귀 호출이라 한다.
- 재귀 함수는 자기 자신을 호출하는 행위, 즉 재귀 호출을 수행하는 함수를 말한다.
- 반복되는 처리를 위해 사용한다.
```
function countdown(n) {
    for (var i = n; i >= 0; i--) console.log(i);
}
countdown(10);
```
- 재귀 함수 내에는 재귀 호출을 멈출 수 있는 **탈출 조건**을 반드시 만들어야 한다.
- 장점:
  - 반복되는 처리를 반복문 없이 구현할 수 있다
- 단점:
  - 무한 반복에 빠질 위험 => 스택 오버플로 에러 발생 가능성


### 12.7.3 중첩 함수
- **중첨 함수** 또는 **내부 함수** 
  - 함수 내부에 정의된 함수
  - 자신을 포함하는 외부 함수를 돕는 헬퍼 함수의 역할을 한다.
- **외부 함수**
  - 중첩 함수를 포함하는 함수

```
function outer() {
    var x = 1;

    // 중첩 함수
    function inner() {
        var y = 2;
        // 외부 함수의 변수를 참조할 수 있다.
        console.log(x + y); // 3
    }

    inner();
}

outer();
```

### 12.7.4 콜백 함수
- 어떤 일을 반복 수행하는 `repeat` 함수

```
// n만큼 어떤 일을 반복한다.
function repeat() {
    // i를 출력한다.
    for (var i = 0; i < n; i++) console.log(i);
}
repeat(5); // 0 1 2 3 4 
```

- **콜백 함수**
  - 함수의 매개변수를 통해 다른 함수의 내부로 전달되는 함수
  - 고차 함수에 의해 호출되며 이때 고차 함수는 필요에 따라 콜백 함수에 인수를 전달할 수 있다.
- **고차 함수**
  - 매개변수를 통해 함수의 외부에서 콜백 함수를 전달받은 함수
  - 매개변수를 통해 전달받은 콜백 함수의 호출 시점을 결정해서 호출한다.


### 12.7.5 순수 함수와 비순수 함수
- 순수 함수
  - 어떤 외부 상태에 의존하지도 않고 변경하지도 않는
  - 부수효과가 없는 함수
- 비순수 함수
  - 부수효과가 있는 함수



## 13. 스코프
### 13.1 스코프란?
- 스코프(유효범위)는 자바스크립트를 포함한 모든 프로그래밍 언어의 기본적이며 중요한 개념이다.
- `var` , `let` , `const` 키워드로 선언한 변수의 스코프는 다르게 동작한다.
- **모든 식별자(변수 이름, 함수 이름, 클래스 이름 등)는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다.** <br>
=> 스코프는 식별자가 유효한 범위를 말한다. <br>
- 식별자 결정: 이름이 같은 두 개의 변수 중에서 어떤 변수를 참조해야 할 것인지를 결정 <br>
=> 자바스크립트 엔진이 **식별자를 검색할 때 사용하는 규칙** <br>
- 스코프를 통해 식별자인 변수 이름의 충돌을 방지하여 같은 이름의 변수를 사용할 수 있게 한다.
- **네임스페이스**
  - 스코프 내에서 식별자는 유일해야 하지만 다른 스코프에는 같은 이름의 식별자를 사용할 수 있다.

### 13.2 스코프의 종류
- 코드는 **전역**과 **지역**으로 구분할 수 있다.
- 전역 스코프
  - 전역
  - 코드의 가장 바깥 영역
  - 전역 변수
- 지역 스코프
  - 지역
  - 함수 몸체 내부
  - 지역 변수 <br>
=> 변수는 자신이 선언된 위치(전역 또는 지역)에 의해 자신이 유효한 범위인 스코프가 결정된다.

### 13.2.1 전역과 전역 스코프
- 전역
  - 코드의 가장 바깥 영역
  - 전역 스코프를 만든다.
  - 전역에 변수를 선언하면 전역 스코프를 갖는 전역 변수가 된다. 
  - 어디서든지 참조할 수 있다. (함수 내부에서도 참조 가능)

### 13.2.2 지역과 지역 스코프
- 지역
  - 함수 몸체 내부
  - 지역 스코프를 만든다.
  - 자신이 선언된 지역과 하위 지역(중첩 함수)에서만 참조할 수 있다.
  - 자신의 지역 스코프와 하위 지역 스코프에서 유효하다.

### 13.3 스코프 체인
- 중첩 함수
  - 함수 몸체 내부에서 정의한 함수
- 외부 함수
  - 중첩 함수를 포함하는 함수
- 상위 스코프
  - 중첩 함수의 지역 스코프는 중첩 함수를 포함하는 외부 함수의 지역 스코프와 **계층적 구조**를 가진다.
- 스코프 체인
  - 변수를 참조할 때 자바스크립트 엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 선언된 변수를 검색한다.
  - 상위 스코프에서 선언한 변수를 하위 스코프에서도 참조할 수 있다.
  - 물리적인 실체로 존재한다.

### 13.3.1 스코프 체인에 의한 변수 검색
- **스코프 체인**을 따라 변수를 참조하는 코드의 스코프에서 시작해서 상위 스코프 방향으로 이동하며 선언된 변수를 검색하다.
- 하위 스코프로 내려가면서 식별자를 검색하는 경우는 절대 없다. <br>
=> 상위 스코프에서 유효한 변수는 하위 스코프에서 자유롭게 참조할 수 있지만 하위 스코프에서 유효한 변수를 상위 스코프에서 참조할 수 없다.

### 13.3.2 스코프 체인에 의한 함수 검색
- 자바스크립트 엔진은 함수 이름과 동일한 이름의 식별자를 암묵적으로 선언하고 생성된 함수 객체를 할당한다.
- **식별자를 검색하는 규칙**

### 13.4 함수 레벨 스코프
- 코드 블록이 아닌 함수에 의해서만 지역 스코프가 생성된다는 의미
- 블록 레벨 스코프
  - C나 자바등을 비롯한 대부분의 프로그래밍 언어
  - 함수 몸체 + 모든 코드 블록 (`if`, `for`, `while`, `try/catch`)
- 함수 레벨 스코프
  - `var` 키워드로 선언된 변수
  - 함수의 코드 블록(함수 몸체) 만을 지역 스코프로 인정


